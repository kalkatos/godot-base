[gd_scene load_steps=12 format=3 uid="uid://dd1lacfgcfen5"]

[ext_resource type="Theme" uid="uid://chuq7tes1dmyf" path="res://Placeholders/Themes/base_theme.tres" id="1_e2xpx"]
[ext_resource type="Script" uid="uid://gnf2b0v1ida" path="res://Modules/UI/version_text.gd" id="1_pedo5"]
[ext_resource type="PackedScene" uid="uid://cgilv0f24mtpj" path="res://Game/Prefabs/UI/BaseButton.tscn" id="3_lr2du"]
[ext_resource type="Texture2D" uid="uid://xx14vs3686ht" path="res://Placeholders/Sprites/UI/settings.png" id="3_qidne"]
[ext_resource type="Script" uid="uid://bui7n4qf35rn2" path="res://Game/Globals/signal_bus.gd" id="4_ceq4o"]
[ext_resource type="Texture2D" uid="uid://b1c5snrofhvsb" path="res://Placeholders/Sprites/UI/settings-pressed.png" id="4_cw8fv"]
[ext_resource type="Texture2D" uid="uid://b4tqoswlmths7" path="res://Placeholders/Sprites/UI/settings-hover.png" id="5_agc72"]
[ext_resource type="Script" uid="uid://bep52cret807s" path="res://Modules/Storage/storage_binder.gd" id="5_e2xpx"]
[ext_resource type="Script" uid="uid://c7y0qe0vrsik5" path="res://Modules/UI/visibility_animator.gd" id="5_lr2du"]
[ext_resource type="Script" uid="uid://brqtcgh6awxtg" path="res://Modules/Audio/audio_player.gd" id="7_tupdg"]
[ext_resource type="AudioStream" uid="uid://dtmxl00momw0h" path="res://Modules/Audio/Samples/click_button.wav" id="8_15447"]

[node name="BaseCanvas" type="CanvasLayer"]

[node name="Version Label" type="Label" parent="."]
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 5.0
offset_top = -29.0
offset_right = 91.0
offset_bottom = -6.0
grow_vertical = 0
theme = ExtResource("1_e2xpx")
theme_override_colors/font_color = Color(0.92178, 0.92178, 0.92178, 1)
text = "v0.0.0"
vertical_alignment = 2
script = ExtResource("1_pedo5")

[node name="Label" type="Label" parent="."]
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -80.0
offset_top = -31.0
offset_right = 80.0
grow_horizontal = 2
grow_vertical = 0
theme = ExtResource("1_e2xpx")
theme_override_colors/font_color = Color(0.92178, 0.92178, 0.92178, 1)
text = "Scene Name"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Settings Button" type="TextureButton" parent="."]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -50.0
offset_top = 9.0
offset_right = -10.0
offset_bottom = 49.0
grow_horizontal = 0
theme = ExtResource("1_e2xpx")
texture_normal = ExtResource("3_qidne")
texture_pressed = ExtResource("4_cw8fv")
texture_hover = ExtResource("5_agc72")
ignore_texture_size = true
stretch_mode = 0
script = ExtResource("4_ceq4o")

[node name="Click Sfx" type="Node" parent="Settings Button"]
script = ExtResource("7_tupdg")
audio = ExtResource("8_15447")
metadata/_custom_type_script = "uid://brqtcgh6awxtg"

[node name="Settings Panel" type="Panel" parent="."]
physics_interpolation_mode = 0
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -144.0
offset_top = -116.0
offset_right = 144.0
offset_bottom = 92.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_ceq4o")

[node name="VisibilityAnimator" type="Control" parent="Settings Panel" node_paths=PackedStringArray("target")]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("5_lr2du")
target = NodePath("..")
animation_time = 0.2
metadata/_custom_type_script = "uid://c7y0qe0vrsik5"

[node name="Title Background" type="ColorRect" parent="Settings Panel"]
layout_mode = 0
offset_left = -1.0
offset_top = -1.0
offset_right = 289.0
offset_bottom = 43.0
color = Color(0.650868, 0.650868, 0.650868, 0.505882)

[node name="Title" type="Label" parent="Settings Panel/Title Background"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -42.5
offset_top = 8.0
offset_right = 42.5
offset_bottom = 37.0
grow_horizontal = 2
theme_override_font_sizes/font_size = 24
text = "Settings"

[node name="Music Container" type="HBoxContainer" parent="Settings Panel"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -125.0
offset_top = -48.0
offset_right = 125.0
offset_bottom = -16.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1

[node name="Music Label" type="Label" parent="Settings Panel/Music Container"]
layout_mode = 2
text = "Music Volume:"

[node name="Music Slider" type="HSlider" parent="Settings Panel/Music Container"]
layout_mode = 2
size_flags_horizontal = 3
theme = ExtResource("1_e2xpx")
max_value = 1.0
step = 0.05
value = 1.0
tick_count = 5
script = ExtResource("4_ceq4o")

[node name="Music Volume Binder" type="Node" parent="Settings Panel/Music Container/Music Slider"]
script = ExtResource("5_e2xpx")
key = "master_music_volume"
metadata/_custom_type_script = "uid://bep52cret807s"

[node name="Sfx Container" type="HBoxContainer" parent="Settings Panel"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -125.0
offset_top = -8.0
offset_right = 125.0
offset_bottom = 24.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1

[node name="Sfx Label" type="Label" parent="Settings Panel/Sfx Container"]
custom_minimum_size = Vector2(100, 0)
layout_mode = 2
text = "SFX Volume:"

[node name="Sfx Slider" type="HSlider" parent="Settings Panel/Sfx Container"]
layout_mode = 2
size_flags_horizontal = 3
theme = ExtResource("1_e2xpx")
max_value = 1.0
step = 0.05
value = 1.0
tick_count = 5
script = ExtResource("4_ceq4o")

[node name="Sfx Volume Binder" type="Node" parent="Settings Panel/Sfx Container/Sfx Slider"]
script = ExtResource("5_e2xpx")
key = "master_sfx_volume"
metadata/_custom_type_script = "uid://bep52cret807s"

[node name="Ok_Button" parent="Settings Panel" instance=ExtResource("3_lr2du")]
layout_mode = 1
offset_top = 39.0
offset_bottom = 79.0
text = "OK"
script = ExtResource("4_ceq4o")

[connection signal="pressed" from="Settings Button" to="Settings Button/Click Sfx" method="play_global_sfx"]
[connection signal="pressed" from="Settings Button" to="Settings Button" method="emit_on_settings_panel" binds= [true]]
[connection signal="_on_settings_panel" from="Settings Panel" to="Settings Panel/VisibilityAnimator" method="animate_visibility"]
[connection signal="_on_music_volume_set" from="Settings Panel/Music Container/Music Slider" to="Settings Panel/Music Container/Music Slider" method="set_value_no_signal"]
[connection signal="value_changed" from="Settings Panel/Music Container/Music Slider" to="Settings Panel/Music Container/Music Slider" method="emit_on_music_volume_set"]
[connection signal="value_changed" from="Settings Panel/Music Container/Music Slider" to="Settings Panel/Music Container/Music Slider/Music Volume Binder" method="change_value"]
[connection signal="on_value_changed" from="Settings Panel/Music Container/Music Slider/Music Volume Binder" to="Settings Panel/Music Container/Music Slider" method="set_value_no_signal"]
[connection signal="_on_sfx_volume_set" from="Settings Panel/Sfx Container/Sfx Slider" to="Settings Panel/Sfx Container/Sfx Slider" method="set_value_no_signal"]
[connection signal="value_changed" from="Settings Panel/Sfx Container/Sfx Slider" to="Settings Panel/Sfx Container/Sfx Slider" method="emit_on_sfx_volume_set"]
[connection signal="value_changed" from="Settings Panel/Sfx Container/Sfx Slider" to="Settings Panel/Sfx Container/Sfx Slider/Sfx Volume Binder" method="change_value"]
[connection signal="on_value_changed" from="Settings Panel/Sfx Container/Sfx Slider/Sfx Volume Binder" to="Settings Panel/Sfx Container/Sfx Slider" method="set_value_no_signal"]
[connection signal="pressed" from="Settings Panel/Ok_Button" to="Settings Panel/Ok_Button" method="emit_on_settings_panel" binds= [false]]
